<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÁªôÈÉëÂñÜÁöÑÂú£ËØûÁ•ùÁ¶è</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#0f2a3a;
      --card:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.16);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.75);
      --accent:#ffd166;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "PingFang SC","Hiragino Sans GB","Microsoft YaHei", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, #223b6b 0%, transparent 60%),
        radial-gradient(900px 600px at 90% 30%, #1b7b6a 0%, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }
    .wrap{
      position:relative;
      width:min(980px, 92vw);
      margin:0 auto;
      padding:28px 0 60px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      border-radius:16px;
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:700; letter-spacing:.5px;
    }
    .badge{
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid var(--stroke);
      color:var(--muted);
      background:rgba(255,255,255,.05);
    }
    .controls{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .btn{
      appearance:none;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      transition:.15s transform ease, .15s background ease;
      user-select:none;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .btn:active{transform:translateY(1px)}
    .hero{
      margin-top:18px;
      border-radius:26px;
      border:1px solid var(--stroke);
      background:linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      backdrop-filter: blur(10px);
      overflow:hidden;
      position:relative;
    }
    .hero-inner{
      padding:34px 22px 26px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      align-items:center;
    }
    @media (max-width: 820px){
      .hero-inner{grid-template-columns:1fr}
    }
    .title{
      font-size: clamp(30px, 4vw, 46px);
      margin:0 0 8px;
      line-height:1.06;
    }
    .title b{color:var(--accent)}
    .subtitle{
      margin:0 0 16px;
      color:var(--muted);
      font-size: clamp(14px, 1.8vw, 16px);
      line-height:1.6;
    }
    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 820px){
      .grid{grid-template-columns:1fr}
    }
    .mini{
      border-radius:18px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      padding:14px 14px;
      min-height:86px;
      position:relative;
      overflow:hidden;
    }
    .mini .k{
      font-size:12px; color:rgba(255,255,255,.72);
      margin-bottom:6px;
    }
    .mini .v{
      font-size:14px;
      line-height:1.6;
      color:rgba(255,255,255,.9);
    }
    canvas#snow{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      z-index:-1;
    }

    /* tree */
    .tree-wrap{display:flex; align-items:center; justify-content:center; padding:6px 0;}
    .tree{
      position:relative;
      width:260px; height:260px;
      filter: drop-shadow(0 20px 40px rgba(0,0,0,.35));
      cursor:pointer;
    }
    .tri{
      position:absolute; left:50%; transform:translateX(-50%);
      border-left:120px solid transparent;
      border-right:120px solid transparent;
      border-bottom:120px solid rgba(99,230,190,.22);
    }
    .tri.t1{top:24px}
    .tri.t2{top:64px; border-left-width:105px; border-right-width:105px; border-bottom-width:110px; opacity:.9}
    .tri.t3{top:104px; border-left-width:90px; border-right-width:90px; border-bottom-width:100px; opacity:.85}
    .trunk{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:18px; width:54px; height:54px; border-radius:14px;
      background: rgba(255,209,102,.22);
      border: 1px solid rgba(255,209,102,.25);
    }
    .star{
      position:absolute; left:50%; top:8px;
      transform:translateX(-50%) rotate(18deg);
      width:48px; height:48px;
      background: radial-gradient(circle at 30% 30%, rgba(255,209,102,.95), rgba(255,209,102,.25));
      clip-path: polygon(50% 0%, 61% 34%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 34%);
      filter: drop-shadow(0 8px 14px rgba(255,209,102,.22));
      animation: twinkle 1.8s infinite ease-in-out;
    }
    @keyframes twinkle{
      0%,100%{transform:translateX(-50%) rotate(18deg) scale(1)}
      50%{transform:translateX(-50%) rotate(18deg) scale(1.06)}
    }

    /* confetti */
    .confetti{position:fixed; inset:0; pointer-events:none; overflow:hidden; display:none;}
    .confetti.show{display:block}
    .piece{
      position:absolute;
      width:10px; height:14px;
      border-radius:3px;
      opacity:.9;
      animation: fall linear forwards;
    }
    @keyframes fall{
      to{transform: translateY(110vh) rotate(720deg); opacity: 0.95}
    }
  </style>
</head>
<body>
  <canvas id="snow"></canvas>

  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <span style="font-size:18px">üéÑ</span>
        <span>Christmas Card</span>
        <span class="badge" id="dateBadge"></span>
      </div>
      <div class="controls">
        <button class="btn" id="btnPlay">üîà Èü≥‰πê</button>
        <button class="btn" id="btnWish">‚ú® Êç¢‰∏ÄÂè•</button>
      </div>
    </div>

    <section class="hero">
      <div class="hero-inner">
        <div>
          <h1 class="title">ÈÉëÂñÜÔºå<b>Âú£ËØûÂø´‰πê</b>„ÄÇ</h1>
          <p class="subtitle" id="subtitle"></p>

          <div class="grid">
            <div class="mini">
              <div class="k">‰∏ÄÂè•ËØù</div>
              <div class="v" id="line1"></div>
            </div>
            <div class="mini">
              <div class="k">‰∏Ä‰∏™ÂøÉÊÑø</div>
              <div class="v" id="line2"></div>
            </div>
            <div class="mini">
              <div class="k">‰∏Ä‰ªΩÂÅèÁà±</div>
              <div class="v" id="line3"></div>
            </div>
          </div>
        </div>

        <div class="tree-wrap">
          <div class="tree" aria-label="Christmas Tree" id="tree">
            <div class="star"></div>
            <div class="tri t1"></div>
            <div class="tri t2"></div>
            <div class="tri t3"></div>
            <div class="trunk"></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="confetti" id="confetti"></div>

  <!--
    Music attribution (required by CC BY 3.0):
    "Jingle Bells (Calm)" ‚Äî Kevin MacLeod (incompetech.com), CC BY 3.0
    Source file page: https://commons.wikimedia.org/wiki/File:Jingle_Bells_(Calm)_(ISRC_USUAN1100188).mp3
  -->
<audio id="music" preload="auto" loop src="./G.E.M. ÈÇìÁ¥´Ê£ã - ÂñúÊ¨¢‰Ω†.mp3"></audio>

  <script>
    const $ = (s) => document.querySelector(s);

    // Date badge
    const now = new Date();
    const pad = (n) => String(n).padStart(2, "0");
    $("#dateBadge").textContent = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}`;

    // Wishes
    const wishes = [
      {
        subtitle: "ÊÑø‰Ω†‰ªäÊôöÁöÑÂøÉÊÉÖÂÉèÁÉ≠ÂèØÂèØ‰∏ÄÊ†∑Ê∏©ÊöñÔºåÂÉèÈõ™Ëä±‰∏ÄÊ†∑ËΩªÁõà„ÄÇ",
        a: "ÊÑø‰Ω†ÁöÑÊØè‰∏ÄÂ§©ÔºåÈÉΩÊúâÂ∞èÁ°ÆÂπ∏ÈôçËêΩ„ÄÇ",
        b: "ÊÑø‰Ω†ÊÉ≥Ë¶ÅÁöÑÔºåÈÉΩÂú®Ë∑Ø‰∏äÔºõ‰Ω†Áà±ÁöÑ‰∫∫ÔºåÈÉΩÂú®Ë∫´ÊóÅ„ÄÇ",
        c: "ÊÑøÊàë‰∏ÄÁõ¥ÊòØ‰Ω†Áñ≤ÊÉ´Êó∂ÁöÑÂÖÖÁîµÁ´ô„ÄÇ"
      },
      {
        subtitle: "Âú£ËØûÈíüÂ£∞ÂìçËµ∑Êó∂ÔºåÊÑøÊâÄÊúâÂ•Ω‰∫ãÈÉΩÊÇÑÊÇÑÂêë‰Ω†Èù†Ëøë„ÄÇ",
        a: "ÊÑø‰Ω†Á¨ëËµ∑Êù•ÁöÑÊó∂ÂÄôÔºåÁúºÁùõÈáåÊúâÊòüÂÖâ„ÄÇ",
        b: "ÊÑø‰Ω†Ë¢´Ê∏©Êüî‰ª•ÂæÖÔºå‰πüÊã•ÊúâÊ∏©ÊüîÁöÑÂäõÈáè„ÄÇ",
        c: "ÊÑøÊàë‰ª¨ÊääÂπ≥Âá°ÁöÑÊó•Â≠êËøáÊàêÈó™Èó™Âèë‰∫Æ„ÄÇ"
      },
      {
        subtitle: "‰Ω†ÂÄºÂæóÊâÄÊúâÁæéÂ•ΩÔºöÁ§ºÁâ©„ÄÅÂÅèÁà±„ÄÅ‰∏éË¢´ÂùöÂÆöÈÄâÊã©„ÄÇ",
        a: "ÊÑø‰Ω†ÊØèÂ§©ÈÉΩÊúâË¢´Áà±ÂåÖÂõ¥ÁöÑÂ∫ïÊ∞î„ÄÇ",
        b: "ÊÑøÁÉ¶ÊÅºÂÉèÈõ™‰∏ÄÊ†∑ÔºåËêΩÂú∞Â∞±Âåñ„ÄÇ",
        c: "ÊÑøÊàëÂØπ‰Ω†ÁöÑÂñúÊ¨¢ÔºåÊ∞∏Ëøú‰∏çËøáÊúü„ÄÇ"
      },
      {
        subtitle: "ÂÜ¨Â§©ÂæàÂÜ∑Ôºå‰ΩÜ‰Ω†‰∏ÄÂá∫Áé∞Ôºå‰∏ñÁïåÂ∞±ÂèòÊöñ‰∫Ü‰∏ÄÁÇπ„ÄÇ",
        a: "ÊÑø‰Ω†‰∏ÄË∑ØÈ°∫È£éÔºå‰πü‰∏ÄË∑ØË¢´ÁÖß‰∫Æ„ÄÇ",
        b: "ÊÑø‰Ω†ÂøÉÊúâÊâÄÂêëÔºåË∫´ÊúâÊâÄÂæÄ„ÄÇ",
        c: "ÊÑøÊàë‰∏ÄÁõ¥Âú®‰Ω†Ë∫´ËæπÔºåÂÅö‰Ω†ÁöÑÂπ≥ÂÆâÂ§ú„ÄÇ"
      }
    ];
    let wishIndex = Math.floor(Math.random() * wishes.length);

    function applyWish(i){
      const w = wishes[i];
      $("#subtitle").textContent = w.subtitle;
      $("#line1").textContent = w.a;
      $("#line2").textContent = w.b;
      $("#line3").textContent = w.c;
    }
    applyWish(wishIndex);

    $("#btnWish").addEventListener("click", () => {
      // startMusicIfNeeded();
      wishIndex = (wishIndex + 1) % wishes.length;
      applyWish(wishIndex);
      burstConfetti(70);
    });

    // Music toggle (user gesture required by browsers)
    const music = $("#music");
    let playing = false;

    async function startMusicIfNeeded() {
  if (playing) return;
  try {
    await music.play();
    playing = true;
    $("#btnPlay").textContent = "üîä Èü≥‰πê";
  } catch (e) {
    // ÂøΩÁï•ÔºöÊüê‰∫õÁéØÂ¢É‰∏ã‰ªçÂèØËÉΩÈúÄË¶ÅÊõ¥ÊòéÁ°ÆÁöÑÁî®Êà∑ÊâãÂäø
  }
}

//     // Ëß¶ÂèëÊí≠ÊîæÔºöÂú£ËØûÊ†ë / Êç¢‰∏ÄÂè•
// $("#tree").addEventListener("click", () => {
//   startMusicIfNeeded();
//   // ‰Ω†ÂéüÊú¨Ê†ëÁÇπÂáª‰ºöÊííÂΩ©Á∫∏ÁöÑÈÄªËæëÂ¶ÇÊûúÂú®Âà´Â§ÑÔºå‰øùÁïôÂç≥ÂèØ
// });


    $("#btnPlay").addEventListener("click", async () => {
      try{
        if(!playing){
          await music.play();
          playing = true;
          $("#btnPlay").textContent = "üîä Èü≥‰πê";
        }else{
          music.pause();
          playing = false;
          $("#btnPlay").textContent = "üîà Èü≥‰πê";
        }
      }catch{
        // ignore (autoplay restrictions / network)
      }
    });

    // Confetti
    const confetti = $("#confetti");
    function burstConfetti(n=90){
      confetti.classList.add("show");
      const W = window.innerWidth;
      const colors = ["rgba(255,209,102,.95)","rgba(255,77,109,.9)","rgba(99,230,190,.9)","rgba(255,255,255,.85)"];
      for(let i=0;i<n;i++){
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = Math.random()*W + "px";
        p.style.top = (-20 - Math.random()*200) + "px";
        p.style.background = colors[(Math.random()*colors.length)|0];
        p.style.animationDuration = (2.5 + Math.random()*2.2) + "s";
        p.style.animationDelay = (Math.random()*0.25) + "s";
        p.style.width = (8 + Math.random()*10) + "px";
        p.style.height = (10 + Math.random()*14) + "px";
        confetti.appendChild(p);
        p.addEventListener("animationend", () => p.remove());
      }
      setTimeout(() => {
        if(confetti.children.length === 0) confetti.classList.remove("show");
      }, 3500);
    }

    $("#tree").addEventListener("click", () => burstConfetti(160));

    // Snow
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");
    let snow = [];

    function resize(){
      const dpr = devicePixelRatio || 1;
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    function initSnow(){
      const count = Math.min(160, Math.floor(window.innerWidth / 8));
      snow = Array.from({length:count}, () => ({
        x: Math.random()*window.innerWidth,
        y: Math.random()*window.innerHeight,
        r: 0.8 + Math.random()*2.2,
        s: 0.4 + Math.random()*1.3,
        d: Math.random()*Math.PI*2
      }));
    }
    function draw(){
      ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
      ctx.beginPath();
      for(const f of snow){
        ctx.moveTo(f.x, f.y);
        ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
      }
      ctx.fillStyle = "rgba(255,255,255,.55)";
      ctx.fill();
      for(const f of snow){
        f.y += f.s;
        f.x += Math.sin(f.d) * 0.35;
        f.d += 0.01;
        if(f.y > window.innerHeight + 10){ f.y = -10; f.x = Math.random()*window.innerWidth; }
        if(f.x < -10) f.x = window.innerWidth + 10;
        if(f.x > window.innerWidth + 10) f.x = -10;
      }
      requestAnimationFrame(draw);
    }

    function reset(){
      resize();
      initSnow();
    }
    window.addEventListener("resize", reset);
    reset();
    draw();
  </script>
</body>
</html>
